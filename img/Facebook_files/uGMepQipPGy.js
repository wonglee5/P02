if (self.CavalryLogger) { CavalryLogger.start_js(["uYuUI"]); }

__d('NotificationJewelList.react',['cx','fbt','Animation','Event','LogicalGrid.react','NotificationListItem.react','NotificationListPropTypes','NotificationsTabConfig','NotificationTabsController','NotificationsTabEnum','NotificationsTabsModel','NotifTestIDs','NotificationVPVs','React','ReactDOM','ScrollableArea.react','SignalsTab.react','SignalsTabGroup.react','Vector','XUISpinner.react','FunnelLogger','NotificationJewelFunnelLoggingConstants','debounce','getObjectValues','isEmpty'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_NAME,k=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_EVENT,l=160,m=530,n=40,o=64,p=430,q=c('React').createClass({displayName:'NotificationJewelList',propTypes:c('NotificationListPropTypes'),_isLoadingIndicatorVisible:function r(){var s=this.refs.loading;if(!s)return false;var t=c('ReactDOM').findDOMNode(this.refs.scrollable),u=c('Vector').getElementDimensions(t).y;if(u===0)return false;var v=c('Vector').getElementPosition(t).y+u,w=c('Vector').getElementPosition(c('ReactDOM').findDOMNode(s)).y;w-=n;return w<v;},_calculateHeight:function r(){var s=c('Vector').getViewportDimensions().y,t=Math.min(this.props.maxHeight||m,s-l);if(this.props.upsell)return Math.max(t-o,0);return t;},_keepOnLoading:function r(){if(this.isMounted()){var s=c('ReactDOM').findDOMNode(this.refs.notifList),t=c('NotificationVPVs').getValidatedRectangle(c('ReactDOM').findDOMNode(this.refs.scrollable));this.props.afterScroll(this._isLoadingIndicatorVisible(),s,t);}},_renderItems:function r(s,t){var u=void 0;if(!s){u=function x(y){return y;};}else u=function x(y){if(y.notifTab===t)return y;return null;};var v=c('getObjectValues')(this.props.notifs).filter(u).map(function(x){return x.alert_id;}),w=c('getObjectValues')(this.props.notifs).map(function(x){return JSON.stringify(x);});return c('getObjectValues')(this.props.notifs).filter(u).map(function(x,y){var z=x.alert_id,aa=this._getNotifRow(z,v);return (c('React').createElement(c('NotificationListItem.react'),babelHelpers['extends']({clientDebugData:w,isRead:this.props.readState[z],key:z,negativeTracking:this.props.negativeTracking,onChevronHide:this.props.onChevronHide,onChevronShow:this.props.onChevronShow,onRead:this.props.onRead,parent:this,paused:this.props.paused,row:aa,rowIndex:y,shortenTimestamp:this.props.shortenTimestamp,visible:!this.props.hiddenState[z]},x)));}.bind(this));},componentDidMount:function r(){var s=c('ReactDOM').findDOMNode(this.refs.scrollable);c('Event').listen(window,'resize',c('debounce')(function(){if(!c('isEmpty')(this.props.notifs))new (c('Animation'))(s).to('height',this._calculateHeight()+'px').duration(100).go();}.bind(this)));},componentDidUpdate:function r(s){if(this.props.paused&&!s.paused)if(this.props.shouldScroll&&this.refs.scrollable)this.refs.scrollable.getArea().scrollToTop(false);setTimeout(this._keepOnLoading,0);},_getNotifRow:function r(s,t){return t.indexOf(s);},_scrollToFetch:function r(){c('FunnelLogger').appendAction(j,k.SCROLL_TO_FETCH);this._keepOnLoading();},render:function r(){var s=this.props.notifs,t=null,u=null,v=p,w=null,x=c('React').createElement('ul',{'data-gt':this.props.tracking,'data-testid':c('NotifTestIDs').REACT_NOTIF_LIST});if(!c('isEmpty')(s)){t=c('React').createElement(c('LogicalGrid.react'),{ref:'notifList',component:x},this._renderItems(false,''));u=this._calculateHeight();}else if(!this.props.canFetchMore)t=c('React').createElement('div',{className:"_572e",'data-testid':c('NotifTestIDs').REACT_NOTIF_LIST},i._("No new notifications"));if(this.props.canFetchMore)w=c('React').createElement(c('XUISpinner.react'),{ref:'loading',className:"jewelLoading"});var y=null;if(this.props.upsell){var z=this.props.upsell.module;y=c('React').createElement(z,this.props.upsell.props);}var aa="_50-t"+(this.props.showingChevron?' '+"_2iy1":''),ba=c('React').createElement(c('ScrollableArea.react'),{ref:'scrollable',width:v,height:u,fade:true,persistent:true,onScroll:c('debounce')(this._scrollToFetch,200)},t,w);if(c('NotificationsTabConfig').in_gk_notifications_tab&&c('NotificationsTabConfig').is_work_user){var ca=true,da=this._renderItems(ca,c('NotificationsTabEnum').CONVERSATIONS),ea=this._renderItems(ca,c('NotificationsTabEnum').KEYWORDS),fa=c('NotificationTabsController')._getSizeUnseenState(s),ga=c('NotificationTabsController')._getTabByName(c('NotificationsTabsModel').TABS.myConversations,fa,x,da),ha=c('NotificationTabsController')._getTabByName(c('NotificationsTabsModel').TABS.keywords,fa,x,ea),ia=c('NotificationsTabsModel').TABS.all;ba=c('React').createElement(c('SignalsTabGroup.react'),{onSelectionChanged:c('NotificationsTabsModel')._onTabSelectionChanged},c('React').createElement(c('SignalsTab.react'),{title:ia,key:ia,count:fa[ia]},ba),ga,ha);}return (c('React').createElement('div',{className:aa},ba,y));}});f.exports=q;}),null);